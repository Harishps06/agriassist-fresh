<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriAssist - Simple Version</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 30px; }
        .logo { font-size: 2.5em; color: #2e7d32; margin-bottom: 10px; }
        .subtitle { color: #666; font-size: 1.2em; }
        .question-box { margin: 20px 0; }
        .question-input { width: 100%; padding: 15px; border: 2px solid #ddd; border-radius: 8px; font-size: 16px; }
        .ask-button { background: #2e7d32; color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin: 10px 0; }
        .ask-button:hover { background: #1b5e20; }
        .result { margin: 20px 0; padding: 20px; border-radius: 8px; }
        .success { background: #e8f5e8; border: 1px solid #4caf50; color: #2e7d32; }
        .error { background: #ffebee; border: 1px solid #f44336; color: #c62828; }
        .loading { background: #e3f2fd; border: 1px solid #2196f3; color: #1565c0; }
        .answer { margin: 10px 0; line-height: 1.6; }
        .metadata { font-size: 0.9em; color: #666; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üåæ AgriAssist</div>
            <div class="subtitle">Smart Farming Solutions - Simple Version</div>
        </div>

        <div class="question-box">
            <h3>Ask a Question</h3>
            <input type="text" id="question" class="question-input" placeholder="Ask a question about farming..." value="How to grow rice in Kerala?">
            <button onclick="askQuestion()" class="ask-button">Ask Question</button>
        </div>

        <div id="result"></div>
    </div>

    <script>
        // Direct connection - NO CONFIG FILES
        const BACKEND_URL = 'http://localhost:3333';

        async function askQuestion() {
            const question = document.getElementById('question').value;
            const resultDiv = document.getElementById('result');
            
            if (!question.trim()) {
                alert('Please enter a question');
                return;
            }
            
            resultDiv.className = 'result loading';
            resultDiv.innerHTML = '<p>üîÑ Analyzing your query...</p><p>Getting personalized farming advice</p>';
            
            try {
                const response = await fetch(`${BACKEND_URL}/api/ask`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        query: question,
                        language: 'en'
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    resultDiv.className = 'result success';
                    resultDiv.innerHTML = `
                        <h4>‚úÖ Answer Received!</h4>
                        <div class="answer">${data.answer}</div>
                        <div class="metadata">
                            <p><strong>Language:</strong> ${data.language}</p>
                            <p><strong>Response Time:</strong> ${data.responseTime} seconds</p>
                            <p><strong>Confidence:</strong> ${(data.confidence * 100).toFixed(1)}%</p>
                            <p><strong>Timestamp:</strong> ${data.timestamp}</p>
                        </div>
                    `;
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.innerHTML = `
                    <h4>‚ùå Error</h4>
                    <p><strong>Error:</strong> ${error.message}</p>
                    <p>Please check if the backend is running on port 3333</p>
                `;
            }
        }

        // Allow Enter key to submit
        document.getElementById('question').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                askQuestion();
            }
        });
    </script>
</body>
</html>
